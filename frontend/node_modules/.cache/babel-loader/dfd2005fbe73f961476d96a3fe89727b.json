{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.default = devToolsEnhancer;\nexports.preEnhancer = preEnhancer;\nexports.composeWithDevTools = composeWithDevTools;\n\nvar _jsan = require('jsan');\n\nvar _socketclusterClient = require('socketcluster-client');\n\nvar _socketclusterClient2 = _interopRequireDefault(_socketclusterClient);\n\nvar _configureStore = require('./configureStore');\n\nvar _configureStore2 = _interopRequireDefault(_configureStore);\n\nvar _constants = require('./constants');\n\nvar _rnHostDetect = require('rn-host-detect');\n\nvar _rnHostDetect2 = _interopRequireDefault(_rnHostDetect);\n\nvar _utils = require('redux-devtools-core/lib/utils');\n\nvar _catchErrors = require('redux-devtools-core/lib/utils/catchErrors');\n\nvar _catchErrors2 = _interopRequireDefault(_catchErrors);\n\nvar _filters = require('redux-devtools-core/lib/utils/filters');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar instanceId = void 0;\nvar instanceName = void 0;\nvar suppressConnectErrors = void 0;\nvar errorCounts = {};\nvar socketOptions = void 0;\nvar socket = void 0;\nvar channel = void 0;\nvar store = {};\nvar lastAction = void 0;\nvar filters = void 0;\nvar isExcess = void 0;\nvar isMonitored = void 0;\nvar started = void 0;\nvar startOn = void 0;\nvar stopOn = void 0;\nvar sendOn = void 0;\nvar sendOnError = void 0;\nvar sendTo = void 0;\nvar lastErrorMsg = void 0;\nvar locked = void 0;\nvar paused = void 0;\nvar actionCreators = void 0;\nvar stateSanitizer = void 0;\nvar actionSanitizer = void 0;\n\nfunction getLiftedState() {\n  return (0, _filters.filterStagedActions)(store.liftedStore.getState(), filters);\n}\n\nfunction send() {\n  if (!instanceId) instanceId = socket && socket.id || Math.random().toString(36).substr(2);\n\n  try {\n    fetch(sendTo, {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        type: 'STATE',\n        id: instanceId,\n        name: instanceName,\n        payload: (0, _jsan.stringify)(getLiftedState())\n      })\n    }).catch(function (err) {\n      console.log(err);\n    });\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction relay(type, state, action, nextActionId) {\n  var message = {\n    type: type,\n    id: socket.id,\n    name: instanceName\n  };\n\n  if (state) {\n    message.payload = type === 'ERROR' ? state : (0, _jsan.stringify)((0, _filters.filterState)(state, type, filters, stateSanitizer, actionSanitizer, nextActionId));\n  }\n\n  if (type === 'ACTION') {\n    message.action = (0, _jsan.stringify)(!actionSanitizer ? action : actionSanitizer(action.action, nextActionId - 1));\n    message.isExcess = isExcess;\n    message.nextActionId = nextActionId;\n  } else if (action) {\n    message.action = action;\n  }\n\n  socket.emit(socket.id ? 'log' : 'log-noid', message);\n}\n\nfunction dispatchRemotely(action) {\n  try {\n    var result = (0, _utils.evalAction)(action, actionCreators);\n    store.dispatch(result);\n  } catch (e) {\n    relay('ERROR', e.message);\n  }\n}\n\nfunction handleMessages(message) {\n  if (message.type === 'IMPORT' || message.type === 'SYNC' && socket.id && message.id !== socket.id) {\n    store.liftedStore.dispatch({\n      type: 'IMPORT_STATE',\n      nextLiftedState: (0, _jsan.parse)(message.state)\n    });\n  } else if (message.type === 'UPDATE') {\n    relay('STATE', getLiftedState());\n  } else if (message.type === 'START') {\n    isMonitored = true;\n    if (typeof actionCreators === 'function') actionCreators = actionCreators();\n    relay('STATE', getLiftedState(), actionCreators);\n  } else if (message.type === 'STOP' || message.type === 'DISCONNECTED') {\n    isMonitored = false;\n    relay('STOP');\n  } else if (message.type === 'ACTION') {\n    dispatchRemotely(message.action);\n  } else if (message.type === 'DISPATCH') {\n    store.liftedStore.dispatch(message.action);\n  }\n}\n\nfunction async(fn) {\n  setTimeout(fn, 0);\n}\n\nfunction sendError(errorAction) {\n  // Prevent flooding\n  if (errorAction.message && errorAction.message === lastErrorMsg) return;\n  lastErrorMsg = errorAction.message;\n  async(function () {\n    store.dispatch(errorAction);\n    if (!started) send();\n  });\n}\n\nfunction str2array(str) {\n  return typeof str === 'string' ? [str] : str && str.length;\n}\n\nfunction init(options) {\n  instanceName = options.name;\n\n  var _ref = options.filters || {},\n      blacklist = _ref.blacklist,\n      whitelist = _ref.whitelist;\n\n  filters = (0, _filters.getLocalFilter)({\n    actionsBlacklist: blacklist || options.actionsBlacklist,\n    actionsWhitelist: whitelist || options.actionsWhitelist\n  });\n\n  if (options.port) {\n    socketOptions = {\n      port: options.port,\n      hostname: options.hostname || 'localhost',\n      secure: options.secure\n    };\n  } else socketOptions = _constants.defaultSocketOptions;\n\n  suppressConnectErrors = options.suppressConnectErrors !== undefined ? options.suppressConnectErrors : true;\n  startOn = str2array(options.startOn);\n  stopOn = str2array(options.stopOn);\n  sendOn = str2array(options.sendOn);\n  sendOnError = options.sendOnError;\n\n  if (sendOn || sendOnError) {\n    sendTo = options.sendTo || (socketOptions.secure ? 'https' : 'http') + '://' + socketOptions.hostname + ':' + socketOptions.port;\n    instanceId = options.id;\n  }\n\n  if (sendOnError === 1) (0, _catchErrors2.default)(sendError);\n  if (options.actionCreators) actionCreators = function actionCreators() {\n    return (0, _utils.getActionsArray)(options.actionCreators);\n  };\n  stateSanitizer = options.stateSanitizer;\n  actionSanitizer = options.actionSanitizer;\n}\n\nfunction login() {\n  socket.emit('login', 'master', function (err, channelName) {\n    if (err) {\n      console.log(err);\n      return;\n    }\n\n    channel = channelName;\n    socket.subscribe(channelName).watch(handleMessages);\n    socket.on(channelName, handleMessages);\n  });\n  started = true;\n  relay('START');\n}\n\nfunction stop(keepConnected) {\n  started = false;\n  isMonitored = false;\n  if (!socket) return;\n  socket.destroyChannel(channel);\n\n  if (keepConnected) {\n    socket.off(channel, handleMessages);\n  } else {\n    socket.off();\n    socket.disconnect();\n  }\n}\n\nfunction start() {\n  if (started || socket && socket.getState() === socket.CONNECTING) return;\n  socket = _socketclusterClient2.default.connect(socketOptions);\n  socket.on('error', function (err) {\n    // if we've already had this error before, increment it's counter, otherwise assign it '1' since we've had the error once.\n    errorCounts[err.name] = errorCounts.hasOwnProperty(err.name) ? errorCounts[err.name] + 1 : 1;\n\n    if (suppressConnectErrors) {\n      if (errorCounts[err.name] === 1) {\n        console.log('remote-redux-devtools: Socket connection errors are being suppressed. ' + '\\n' + 'This can be disabled by setting suppressConnectErrors to \\'false\\'.');\n        console.log(err);\n      }\n    } else {\n      console.log(err);\n    }\n  });\n  socket.on('connect', function () {\n    console.log('connected to remotedev-server');\n    errorCounts = {}; // clear the errorCounts object, so that we'll log any new errors in the event of a disconnect\n\n    login();\n  });\n  socket.on('disconnect', function () {\n    stop(true);\n  });\n}\n\nfunction checkForReducerErrors() {\n  var liftedState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : store.liftedStore.getState();\n\n  if (liftedState.computedStates[liftedState.currentStateIndex].error) {\n    if (started) relay('STATE', (0, _filters.filterStagedActions)(liftedState, filters));else send();\n    return true;\n  }\n\n  return false;\n}\n\nfunction monitorReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments[1];\n  lastAction = action.type;\n  if (!started && sendOnError === 2 && store.liftedStore) async(checkForReducerErrors);else if (action.action) {\n    if (startOn && !started && startOn.indexOf(action.action.type) !== -1) async(start);else if (stopOn && started && stopOn.indexOf(action.action.type) !== -1) async(stop);else if (sendOn && !started && sendOn.indexOf(action.action.type) !== -1) async(send);\n  }\n  return state;\n}\n\nfunction handleChange(state, liftedState, maxAge) {\n  if (checkForReducerErrors(liftedState)) return;\n\n  if (lastAction === 'PERFORM_ACTION') {\n    var nextActionId = liftedState.nextActionId;\n    var liftedAction = liftedState.actionsById[nextActionId - 1];\n    if ((0, _filters.isFiltered)(liftedAction.action, filters)) return;\n    relay('ACTION', state, liftedAction, nextActionId);\n    if (!isExcess && maxAge) isExcess = liftedState.stagedActionIds.length >= maxAge;\n  } else {\n    if (lastAction === 'JUMP_TO_STATE') return;\n\n    if (lastAction === 'PAUSE_RECORDING') {\n      paused = liftedState.isPaused;\n    } else if (lastAction === 'LOCK_CHANGES') {\n      locked = liftedState.isLocked;\n    }\n\n    if (paused || locked) {\n      if (lastAction) lastAction = undefined;else return;\n    }\n\n    relay('STATE', (0, _filters.filterStagedActions)(liftedState, filters));\n  }\n}\n\nfunction devToolsEnhancer() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  init(_extends({}, options, {\n    hostname: (0, _rnHostDetect2.default)(options.hostname || 'localhost')\n  }));\n  var realtime = typeof options.realtime === 'undefined' ? process.env.NODE_ENV === 'development' : options.realtime;\n  if (!realtime && !(startOn || sendOn || sendOnError)) return function (f) {\n    return f;\n  };\n  var maxAge = options.maxAge || 30;\n  return function (next) {\n    return function (reducer, initialState) {\n      store = (0, _configureStore2.default)(next, monitorReducer, {\n        maxAge: maxAge,\n        trace: options.trace,\n        traceLimit: options.traceLimit,\n        shouldCatchErrors: !!sendOnError,\n        shouldHotReload: options.shouldHotReload,\n        shouldRecordChanges: options.shouldRecordChanges,\n        shouldStartLocked: options.shouldStartLocked,\n        pauseActionType: options.pauseActionType || '@@PAUSED'\n      })(reducer, initialState);\n      if (realtime) start();\n      store.subscribe(function () {\n        if (isMonitored) handleChange(store.getState(), store.liftedStore.getState(), maxAge);\n      });\n      return store;\n    };\n  };\n}\n\nfunction preEnhancer(createStore) {\n  return function (reducer, preloadedState, enhancer) {\n    store = createStore(reducer, preloadedState, enhancer);\n    return _extends({}, store, {\n      dispatch: function dispatch(action) {\n        return locked ? action : store.dispatch(action);\n      }\n    });\n  };\n}\n\ndevToolsEnhancer.updateStore = function (newStore) {\n  console.warn('devTools.updateStore is deprecated use composeWithDevTools instead: ' + 'https://github.com/zalmoxisus/remote-redux-devtools#use-devtools-compose-helper');\n  store = newStore;\n};\n\nvar compose = function compose(options) {\n  return function () {\n    for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n      funcs[_key] = arguments[_key];\n    }\n\n    return function () {\n      return [preEnhancer].concat(funcs).reduceRight(function (composed, f) {\n        return f(composed);\n      }, devToolsEnhancer(options).apply(undefined, arguments));\n    };\n  };\n};\n\nfunction composeWithDevTools() {\n  if (arguments.length === 0) {\n    return devToolsEnhancer();\n  }\n\n  if (arguments.length === 1 && _typeof(arguments.length <= 0 ? undefined : arguments[0]) === 'object') {\n    return compose(arguments.length <= 0 ? undefined : arguments[0]);\n  }\n\n  return compose({}).apply(undefined, arguments);\n}","map":{"version":3,"sources":["C:/Users/aleor/Desktop/Code/wbsc/frontend/node_modules/remote-redux-devtools/lib/devTools.js"],"names":["exports","__esModule","_typeof","Symbol","iterator","obj","constructor","prototype","_extends","Object","assign","target","i","arguments","length","source","key","hasOwnProperty","call","default","devToolsEnhancer","preEnhancer","composeWithDevTools","_jsan","require","_socketclusterClient","_socketclusterClient2","_interopRequireDefault","_configureStore","_configureStore2","_constants","_rnHostDetect","_rnHostDetect2","_utils","_catchErrors","_catchErrors2","_filters","instanceId","instanceName","suppressConnectErrors","errorCounts","socketOptions","socket","channel","store","lastAction","filters","isExcess","isMonitored","started","startOn","stopOn","sendOn","sendOnError","sendTo","lastErrorMsg","locked","paused","actionCreators","stateSanitizer","actionSanitizer","getLiftedState","filterStagedActions","liftedStore","getState","send","id","Math","random","toString","substr","fetch","method","headers","body","JSON","stringify","type","name","payload","catch","err","console","log","relay","state","action","nextActionId","message","filterState","emit","dispatchRemotely","result","evalAction","dispatch","e","handleMessages","nextLiftedState","parse","async","fn","setTimeout","sendError","errorAction","str2array","str","init","options","_ref","blacklist","whitelist","getLocalFilter","actionsBlacklist","actionsWhitelist","port","hostname","secure","defaultSocketOptions","undefined","getActionsArray","login","channelName","subscribe","watch","on","stop","keepConnected","destroyChannel","off","disconnect","start","CONNECTING","connect","checkForReducerErrors","liftedState","computedStates","currentStateIndex","error","monitorReducer","indexOf","handleChange","maxAge","liftedAction","actionsById","isFiltered","stagedActionIds","isPaused","isLocked","realtime","process","env","NODE_ENV","f","next","reducer","initialState","trace","traceLimit","shouldCatchErrors","shouldHotReload","shouldRecordChanges","shouldStartLocked","pauseActionType","createStore","preloadedState","enhancer","updateStore","newStore","warn","compose","_len","funcs","Array","_key","concat","reduceRight","composed","apply"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = devToolsEnhancer;\nexports.preEnhancer = preEnhancer;\nexports.composeWithDevTools = composeWithDevTools;\n\nvar _jsan = require('jsan');\n\nvar _socketclusterClient = require('socketcluster-client');\n\nvar _socketclusterClient2 = _interopRequireDefault(_socketclusterClient);\n\nvar _configureStore = require('./configureStore');\n\nvar _configureStore2 = _interopRequireDefault(_configureStore);\n\nvar _constants = require('./constants');\n\nvar _rnHostDetect = require('rn-host-detect');\n\nvar _rnHostDetect2 = _interopRequireDefault(_rnHostDetect);\n\nvar _utils = require('redux-devtools-core/lib/utils');\n\nvar _catchErrors = require('redux-devtools-core/lib/utils/catchErrors');\n\nvar _catchErrors2 = _interopRequireDefault(_catchErrors);\n\nvar _filters = require('redux-devtools-core/lib/utils/filters');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar instanceId = void 0;\nvar instanceName = void 0;\nvar suppressConnectErrors = void 0;\nvar errorCounts = {};\nvar socketOptions = void 0;\nvar socket = void 0;\nvar channel = void 0;\nvar store = {};\nvar lastAction = void 0;\nvar filters = void 0;\nvar isExcess = void 0;\nvar isMonitored = void 0;\nvar started = void 0;\nvar startOn = void 0;\nvar stopOn = void 0;\nvar sendOn = void 0;\nvar sendOnError = void 0;\nvar sendTo = void 0;\nvar lastErrorMsg = void 0;\nvar locked = void 0;\nvar paused = void 0;\nvar actionCreators = void 0;\nvar stateSanitizer = void 0;\nvar actionSanitizer = void 0;\n\nfunction getLiftedState() {\n  return (0, _filters.filterStagedActions)(store.liftedStore.getState(), filters);\n}\n\nfunction send() {\n  if (!instanceId) instanceId = socket && socket.id || Math.random().toString(36).substr(2);\n  try {\n    fetch(sendTo, {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        type: 'STATE',\n        id: instanceId,\n        name: instanceName,\n        payload: (0, _jsan.stringify)(getLiftedState())\n      })\n    }).catch(function (err) {\n      console.log(err);\n    });\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction relay(type, state, action, nextActionId) {\n  var message = {\n    type: type,\n    id: socket.id,\n    name: instanceName\n  };\n  if (state) {\n    message.payload = type === 'ERROR' ? state : (0, _jsan.stringify)((0, _filters.filterState)(state, type, filters, stateSanitizer, actionSanitizer, nextActionId));\n  }\n  if (type === 'ACTION') {\n    message.action = (0, _jsan.stringify)(!actionSanitizer ? action : actionSanitizer(action.action, nextActionId - 1));\n    message.isExcess = isExcess;\n    message.nextActionId = nextActionId;\n  } else if (action) {\n    message.action = action;\n  }\n  socket.emit(socket.id ? 'log' : 'log-noid', message);\n}\n\nfunction dispatchRemotely(action) {\n  try {\n    var result = (0, _utils.evalAction)(action, actionCreators);\n    store.dispatch(result);\n  } catch (e) {\n    relay('ERROR', e.message);\n  }\n}\n\nfunction handleMessages(message) {\n  if (message.type === 'IMPORT' || message.type === 'SYNC' && socket.id && message.id !== socket.id) {\n    store.liftedStore.dispatch({\n      type: 'IMPORT_STATE', nextLiftedState: (0, _jsan.parse)(message.state)\n    });\n  } else if (message.type === 'UPDATE') {\n    relay('STATE', getLiftedState());\n  } else if (message.type === 'START') {\n    isMonitored = true;\n    if (typeof actionCreators === 'function') actionCreators = actionCreators();\n    relay('STATE', getLiftedState(), actionCreators);\n  } else if (message.type === 'STOP' || message.type === 'DISCONNECTED') {\n    isMonitored = false;\n    relay('STOP');\n  } else if (message.type === 'ACTION') {\n    dispatchRemotely(message.action);\n  } else if (message.type === 'DISPATCH') {\n    store.liftedStore.dispatch(message.action);\n  }\n}\n\nfunction async(fn) {\n  setTimeout(fn, 0);\n}\n\nfunction sendError(errorAction) {\n  // Prevent flooding\n  if (errorAction.message && errorAction.message === lastErrorMsg) return;\n  lastErrorMsg = errorAction.message;\n\n  async(function () {\n    store.dispatch(errorAction);\n    if (!started) send();\n  });\n}\n\nfunction str2array(str) {\n  return typeof str === 'string' ? [str] : str && str.length;\n}\n\nfunction init(options) {\n  instanceName = options.name;\n\n  var _ref = options.filters || {},\n      blacklist = _ref.blacklist,\n      whitelist = _ref.whitelist;\n\n  filters = (0, _filters.getLocalFilter)({\n    actionsBlacklist: blacklist || options.actionsBlacklist,\n    actionsWhitelist: whitelist || options.actionsWhitelist\n  });\n  if (options.port) {\n    socketOptions = {\n      port: options.port,\n      hostname: options.hostname || 'localhost',\n      secure: options.secure\n    };\n  } else socketOptions = _constants.defaultSocketOptions;\n\n  suppressConnectErrors = options.suppressConnectErrors !== undefined ? options.suppressConnectErrors : true;\n\n  startOn = str2array(options.startOn);\n  stopOn = str2array(options.stopOn);\n  sendOn = str2array(options.sendOn);\n  sendOnError = options.sendOnError;\n  if (sendOn || sendOnError) {\n    sendTo = options.sendTo || (socketOptions.secure ? 'https' : 'http') + '://' + socketOptions.hostname + ':' + socketOptions.port;\n    instanceId = options.id;\n  }\n  if (sendOnError === 1) (0, _catchErrors2.default)(sendError);\n\n  if (options.actionCreators) actionCreators = function actionCreators() {\n    return (0, _utils.getActionsArray)(options.actionCreators);\n  };\n  stateSanitizer = options.stateSanitizer;\n  actionSanitizer = options.actionSanitizer;\n}\n\nfunction login() {\n  socket.emit('login', 'master', function (err, channelName) {\n    if (err) {\n      console.log(err);return;\n    }\n    channel = channelName;\n    socket.subscribe(channelName).watch(handleMessages);\n    socket.on(channelName, handleMessages);\n  });\n  started = true;\n  relay('START');\n}\n\nfunction stop(keepConnected) {\n  started = false;\n  isMonitored = false;\n  if (!socket) return;\n  socket.destroyChannel(channel);\n  if (keepConnected) {\n    socket.off(channel, handleMessages);\n  } else {\n    socket.off();\n    socket.disconnect();\n  }\n}\n\nfunction start() {\n  if (started || socket && socket.getState() === socket.CONNECTING) return;\n\n  socket = _socketclusterClient2.default.connect(socketOptions);\n\n  socket.on('error', function (err) {\n    // if we've already had this error before, increment it's counter, otherwise assign it '1' since we've had the error once.\n    errorCounts[err.name] = errorCounts.hasOwnProperty(err.name) ? errorCounts[err.name] + 1 : 1;\n\n    if (suppressConnectErrors) {\n      if (errorCounts[err.name] === 1) {\n        console.log('remote-redux-devtools: Socket connection errors are being suppressed. ' + '\\n' + 'This can be disabled by setting suppressConnectErrors to \\'false\\'.');\n        console.log(err);\n      }\n    } else {\n      console.log(err);\n    }\n  });\n  socket.on('connect', function () {\n    console.log('connected to remotedev-server');\n    errorCounts = {}; // clear the errorCounts object, so that we'll log any new errors in the event of a disconnect\n    login();\n  });\n  socket.on('disconnect', function () {\n    stop(true);\n  });\n}\n\nfunction checkForReducerErrors() {\n  var liftedState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : store.liftedStore.getState();\n\n  if (liftedState.computedStates[liftedState.currentStateIndex].error) {\n    if (started) relay('STATE', (0, _filters.filterStagedActions)(liftedState, filters));else send();\n    return true;\n  }\n  return false;\n}\n\nfunction monitorReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments[1];\n\n  lastAction = action.type;\n  if (!started && sendOnError === 2 && store.liftedStore) async(checkForReducerErrors);else if (action.action) {\n    if (startOn && !started && startOn.indexOf(action.action.type) !== -1) async(start);else if (stopOn && started && stopOn.indexOf(action.action.type) !== -1) async(stop);else if (sendOn && !started && sendOn.indexOf(action.action.type) !== -1) async(send);\n  }\n  return state;\n}\n\nfunction handleChange(state, liftedState, maxAge) {\n  if (checkForReducerErrors(liftedState)) return;\n\n  if (lastAction === 'PERFORM_ACTION') {\n    var nextActionId = liftedState.nextActionId;\n    var liftedAction = liftedState.actionsById[nextActionId - 1];\n    if ((0, _filters.isFiltered)(liftedAction.action, filters)) return;\n    relay('ACTION', state, liftedAction, nextActionId);\n    if (!isExcess && maxAge) isExcess = liftedState.stagedActionIds.length >= maxAge;\n  } else {\n    if (lastAction === 'JUMP_TO_STATE') return;\n    if (lastAction === 'PAUSE_RECORDING') {\n      paused = liftedState.isPaused;\n    } else if (lastAction === 'LOCK_CHANGES') {\n      locked = liftedState.isLocked;\n    }\n    if (paused || locked) {\n      if (lastAction) lastAction = undefined;else return;\n    }\n    relay('STATE', (0, _filters.filterStagedActions)(liftedState, filters));\n  }\n}\n\nfunction devToolsEnhancer() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  init(_extends({}, options, {\n    hostname: (0, _rnHostDetect2.default)(options.hostname || 'localhost')\n  }));\n  var realtime = typeof options.realtime === 'undefined' ? process.env.NODE_ENV === 'development' : options.realtime;\n  if (!realtime && !(startOn || sendOn || sendOnError)) return function (f) {\n    return f;\n  };\n\n  var maxAge = options.maxAge || 30;\n  return function (next) {\n    return function (reducer, initialState) {\n      store = (0, _configureStore2.default)(next, monitorReducer, {\n        maxAge: maxAge,\n        trace: options.trace,\n        traceLimit: options.traceLimit,\n        shouldCatchErrors: !!sendOnError,\n        shouldHotReload: options.shouldHotReload,\n        shouldRecordChanges: options.shouldRecordChanges,\n        shouldStartLocked: options.shouldStartLocked,\n        pauseActionType: options.pauseActionType || '@@PAUSED'\n      })(reducer, initialState);\n\n      if (realtime) start();\n      store.subscribe(function () {\n        if (isMonitored) handleChange(store.getState(), store.liftedStore.getState(), maxAge);\n      });\n      return store;\n    };\n  };\n}\n\nfunction preEnhancer(createStore) {\n  return function (reducer, preloadedState, enhancer) {\n    store = createStore(reducer, preloadedState, enhancer);\n    return _extends({}, store, {\n      dispatch: function dispatch(action) {\n        return locked ? action : store.dispatch(action);\n      }\n    });\n  };\n}\n\ndevToolsEnhancer.updateStore = function (newStore) {\n  console.warn('devTools.updateStore is deprecated use composeWithDevTools instead: ' + 'https://github.com/zalmoxisus/remote-redux-devtools#use-devtools-compose-helper');\n  store = newStore;\n};\n\nvar compose = function compose(options) {\n  return function () {\n    for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n      funcs[_key] = arguments[_key];\n    }\n\n    return function () {\n      return [preEnhancer].concat(funcs).reduceRight(function (composed, f) {\n        return f(composed);\n      }, devToolsEnhancer(options).apply(undefined, arguments));\n    };\n  };\n};\n\nfunction composeWithDevTools() {\n  if (arguments.length === 0) {\n    return devToolsEnhancer();\n  }\n  if (arguments.length === 1 && _typeof(arguments.length <= 0 ? undefined : arguments[0]) === 'object') {\n    return compose(arguments.length <= 0 ? undefined : arguments[0]);\n  }\n  return compose({}).apply(undefined, arguments);\n}"]},"metadata":{},"sourceType":"script"}