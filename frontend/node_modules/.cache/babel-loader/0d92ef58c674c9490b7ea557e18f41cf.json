{"ast":null,"code":"var _jsxFileName = \"/home/viktta/Code/wbsc/frontend/src/Components/Home.js\";\nimport React, { Component } from \"react\";\nimport { Switch, Route, Link, BrowserRouter } from \"react-router-dom\";\nimport Login from \"./Login\";\nimport Signup from \"./Signup\";\nimport axiosInstance from './axiosApi';\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      email: \"\",\n      errors: {}\n    };\n    this.handleLogout = this.handleLogout.bind(this);\n    this.signUpHandleChange = this.signUpHandleChange.bind(this);\n    this.signUpHandleSubmit = this.signUpHandleSubmit.bind(this);\n    this.loginHandleSubmit = this.loginHandleSubmit.bind(this);\n    this.loginHandleChange = this.loginHandleChange.bind(this);\n  }\n\n  async handleLogout() {\n    try {\n      const response = await axiosInstance.post('/blacklist/', {\n        \"refresh_token\": localStorage.getItem(\"refresh_token\")\n      });\n      localStorage.removeItem('access_token');\n      localStorage.removeItem('refresh_token');\n      axiosInstance.defaults.headers['Authorization'] = null;\n      return response;\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async signUpHandleSubmit(event) {\n    event.preventDefault();\n\n    try {\n      const response = await axiosInstance.post('/user/create/', {\n        username: this.state.username,\n        email: this.state.email,\n        password: this.state.password\n      });\n      return response;\n    } catch (error) {\n      console.log(error.stack);\n      this.setState({\n        errors: error.response.data\n      });\n    }\n  }\n\n  signUpHandleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  loginHandleSubmit(event) {\n    event.preventDefault();\n    axiosInstance.post('/token/obtain/', {\n      username: this.state.username,\n      password: this.state.password\n    }).then(result => {\n      axiosInstance.defaults.headers['Authorization'] = \"JWT \" + result.data.access;\n      localStorage.setItem('access_token', result.data.access);\n      localStorage.setItem('refresh_token', result.data.refresh);\n    }).catch(error => {\n      throw error;\n    });\n  }\n\n  loginHandleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n  /*async asyncLoginHandleSubmit(event) {\n      event.preventDefault();\n      try {\n          const data = await axiosInstance.post('/token/obtain/', {\n              username: this.state.username,\n              password: this.state.password\n          });\n          axiosInstance.defaults.headers['Authorization'] = \"JWT \" + data.access;\n          localStorage.setItem('access_token', data.access);\n          localStorage.setItem('refresh_token', data.refresh);\n          return data;\n      } catch (error) {\n          throw error;\n      }\n  }*/\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"site\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 18\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(BrowserRouter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"nav-link\",\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }, \" Home \"), \" \", /*#__PURE__*/React.createElement(Link, {\n      className: \"nav-link\",\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 31\n      }\n    }, \" Login \"), \" \", /*#__PURE__*/React.createElement(Link, {\n      className: \"nav-link\",\n      to: \"/signup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 32\n      }\n    }, \" Signup \"), \" \", /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 33\n      }\n    }, \" Logout \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(BrowserRouter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      component: Login,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }\n    }), \" \", /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/signup\",\n      component: Signup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 16\n      }\n    }), \" \", /*#__PURE__*/React.createElement(Route, {\n      path: \"/\",\n      render: () => /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 23\n        }\n      }, \" Home again \"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 16\n      }\n    })), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-main-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 24\n      }\n    }, /*#__PURE__*/React.createElement(Login, {\n      loginSubmit: this.loginHandleSubmit,\n      loginChange: this.loginHandleChange,\n      loginUsername: this.state.username,\n      loginPassword: this.state.password,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }\n    }), \" \"), \" \");\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/viktta/Code/wbsc/frontend/src/Components/Home.js"],"names":["React","Component","Switch","Route","Link","BrowserRouter","Login","Signup","axiosInstance","Home","constructor","props","state","username","password","email","errors","handleLogout","bind","signUpHandleChange","signUpHandleSubmit","loginHandleSubmit","loginHandleChange","response","post","localStorage","getItem","removeItem","defaults","headers","e","console","log","event","preventDefault","error","stack","setState","data","target","name","value","then","result","access","setItem","refresh","catch","render"],"mappings":"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","sourcesContent":["import React, {\n    Component\n} from \"react\";\nimport {\n    Switch,\n    Route,\n    Link,\n    BrowserRouter\n} from \"react-router-dom\";\nimport Login from \"./Login\";\nimport Signup from \"./Signup\";\nimport axiosInstance from './axiosApi';\n\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: \"\",\n            password: \"\",\n            email: \"\",\n            errors: {},\n        }\n        this.handleLogout = this.handleLogout.bind(this);\n        this.signUpHandleChange = this.signUpHandleChange.bind(this);\n        this.signUpHandleSubmit = this.signUpHandleSubmit.bind(this);\n        this.loginHandleSubmit = this.loginHandleSubmit.bind(this);\n        this.loginHandleChange = this.loginHandleChange.bind(this);\n    }\n\n    async handleLogout() {\n        try {\n            const response = await axiosInstance.post('/blacklist/', {\n                \"refresh_token\": localStorage.getItem(\"refresh_token\")\n            });\n            localStorage.removeItem('access_token');\n            localStorage.removeItem('refresh_token');\n            axiosInstance.defaults.headers['Authorization'] = null;\n            return response;\n        } catch (e) {\n            console.log(e);\n        }\n    };\n\n    async signUpHandleSubmit(event) {\n        event.preventDefault();\n        try {\n            const response = await axiosInstance.post('/user/create/', {\n                username: this.state.username,\n                email: this.state.email,\n                password: this.state.password\n            });\n            return response;\n        } catch (error) {\n            console.log(error.stack);\n            this.setState({\n                errors: error.response.data\n            });\n        }\n    }\n\n\n    signUpHandleChange(event) {\n        this.setState({\n            [event.target.name]: event.target.value\n        });\n    }\n\n    loginHandleSubmit(event) {\n        event.preventDefault();\n        axiosInstance.post('/token/obtain/', {\n            username: this.state.username,\n            password: this.state.password\n        }).then(\n            result => {\n                axiosInstance.defaults.headers['Authorization'] = \"JWT \" + result.data.access;\n                localStorage.setItem('access_token', result.data.access);\n                localStorage.setItem('refresh_token', result.data.refresh);\n            }\n        ).catch(error => {\n            throw error;\n        })\n    }\n\n\n    loginHandleChange(event) {\n        this.setState({\n            [event.target.name]: event.target.value\n        });\n    }\n\n    /*async asyncLoginHandleSubmit(event) {\n        event.preventDefault();\n        try {\n            const data = await axiosInstance.post('/token/obtain/', {\n                username: this.state.username,\n                password: this.state.password\n            });\n            axiosInstance.defaults.headers['Authorization'] = \"JWT \" + data.access;\n            localStorage.setItem('access_token', data.access);\n            localStorage.setItem('refresh_token', data.refresh);\n            return data;\n        } catch (error) {\n            throw error;\n        }\n    }*/\n\n\n    render() {\n        return ( <\n            div className = \"site\" >\n            <\n            nav >\n            <\n            BrowserRouter >\n            <\n            Link className = {\n                \"nav-link\"\n            }\n            to = {\n                \"/\"\n            } > Home < /Link> <\n            Link className = {\n                \"nav-link\"\n            }\n            to = {\n                \"/login\"\n            } > Login < /Link> <\n            Link className = {\n                \"nav-link\"\n            }\n            to = {\n                \"/signup\"\n            } > Signup < /Link> <\n            button onClick = {\n                this.handleLogout\n            } > Logout < /button> <\n            /BrowserRouter> <\n            /nav> <\n            main >\n            <\n            BrowserRouter >\n            <\n            Switch >\n            <\n            Route exact path = {\n                \"/login\"\n            }\n            component = {\n                Login\n            }\n            /> <\n            Route exact path = {\n                \"/signup\"\n            }\n            component = {\n                Signup\n            }\n            /> <\n            Route path = {\n                \"/\"\n            }\n            render = {\n                () => < div > Home again < /div>}/ >\n                <\n                /Switch> <\n                /BrowserRouter> <\n                /main> <\n                div className = \"user-main-div\" >\n                <\n                Login loginSubmit = {\n                    this.loginHandleSubmit\n                }\n                loginChange = {\n                    this.loginHandleChange\n                }\n                loginUsername = {\n                    this.state.username\n                }\n                loginPassword = {\n                    this.state.password\n                }\n                /> <\n                /div> <\n                /div>\n            );\n        }\n    }\n\n    export default Home;"]},"metadata":{},"sourceType":"module"}