{"ast":null,"code":"var _jsxFileName = \"/home/viktta/Code/wbsc/frontend/src/Components/Home.js\";\nimport React, { Component } from \"react\";\nimport { Switch, Route, Link, BrowserRouter } from \"react-router-dom\";\nimport axiosInstance from './axiosApi.js';\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      email: \"\",\n      errors: {}\n    };\n    this.handleLogout = this.handleLogout.bind(this);\n    this.SignupHandleChange = this.SignupHandleChange.bind(this);\n    this.SignupHandleSubmit = this.SignupHandleSubmit.bind(this);\n    this.LoginHandleChange = this.LoginHandleChange.bind(this);\n    this.LoginHandleSubmit = this.LoginHandleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    const {\n      username,\n      password\n    } = this.state;\n    localStorage.setItem('username', username);\n    localStorage.setItem('password', password);\n    const localstorageusername = localStorage.setItem('username', username);\n    const localstoragepassword = localStorage.setItem('password', password);\n    console.log(localstorageusername);\n    console.log(localstoragepassword);\n  }\n\n  async LoginHandleSubmit(event) {\n    try {\n      const data = await axiosInstance.post('/token/obtain/', {\n        username: this.state.username,\n        password: this.state.password\n      });\n      axiosInstance.defaults.headers['Authorization'] = \"JWT \" + data.access;\n      localStorage.setItem('access_token', data.access);\n      localStorage.setItem('refresh_token', data.refresh);\n      return data;\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  LoginHandleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  SignupHandleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  async SignupHandleSubmit(event) {\n    event.preventDefault();\n\n    try {\n      const response = await axiosInstance.post('/user/create/', {\n        username: this.state.username,\n        email: this.state.email,\n        password: this.state.password\n      });\n      return response;\n    } catch (error) {\n      console.log(error.stack);\n      this.setState({\n        errors: error.response.data\n      });\n    }\n  }\n\n  async handleLogout() {\n    try {\n      const response = await axiosInstance.post('/blacklist/', {\n        \"refresh_token\": localStorage.getItem(\"refresh_token\")\n      });\n      localStorage.removeItem('access_token');\n      localStorage.removeItem('refresh_token');\n      axiosInstance.defaults.headers['Authorization'] = null;\n      return response;\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"site\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(BrowserRouter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"nav-link\",\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }\n    }, \"Home\"), /*#__PURE__*/React.createElement(Link, {\n      className: \"nav-link\",\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(Link, {\n      className: \"nav-link\",\n      to: \"/signup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }\n    }, \"Signup\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }\n    }, \"Logout\"))), /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(BrowserRouter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      component: Login,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/signup\",\n      component: Signup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/\",\n      render: () => /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 57\n        }\n      }, \"Home again\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(Login, {\n      username: this.state.username,\n      password: this.state.password,\n      submit: this.LoginHandleSubmit,\n      change: this.LoginHandleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Signup, {\n      username: this.state.username,\n      password: this.state.password,\n      email: this.state.email,\n      submit: this.SignupHandleSubmit,\n      change: this.SignupHandleChange,\n      errors: this.state.errors,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nclass Signup extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      username,\n      email,\n      password,\n      errors\n    } = this.props;\n    const handleChange = this.props.change;\n    const handleSubmit = this.props.submit;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    }, \"Signup\", /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }\n    }, \"Username:\", /*#__PURE__*/React.createElement(\"input\", {\n      name: \"username\",\n      type: \"text\",\n      value: username,\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 21\n      }\n    }, \"Email:\", /*#__PURE__*/React.createElement(\"input\", {\n      name: \"email\",\n      type: \"email\",\n      value: email,\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 25\n      }\n    }), errors.email ? errors.email : null), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    }, \"Password:\", /*#__PURE__*/React.createElement(\"input\", {\n      name: \"password\",\n      type: \"password\",\n      value: password,\n      placeholder: \"8 characters or more\",\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 25\n      }\n    }), errors.password ? errors.password : null), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nclass Login extends Component {\n  render() {\n    const {\n      username,\n      password\n    } = this.props;\n    const handleChange = this.props.change;\n    const handleSubmit = this.props.submit;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }\n    }, \"Login\", /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 21\n      }\n    }, \"Username:\", /*#__PURE__*/React.createElement(\"input\", {\n      name: \"username\",\n      type: \"text\",\n      value: username,\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 21\n      }\n    }, \"Password:\", /*#__PURE__*/React.createElement(\"input\", {\n      name: \"password\",\n      type: \"password\",\n      value: password,\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/viktta/Code/wbsc/frontend/src/Components/Home.js"],"names":["React","Component","Switch","Route","Link","BrowserRouter","axiosInstance","Home","constructor","props","state","username","password","email","errors","handleLogout","bind","SignupHandleChange","SignupHandleSubmit","LoginHandleChange","LoginHandleSubmit","componentDidMount","localStorage","setItem","localstorageusername","localstoragepassword","console","log","event","data","post","defaults","headers","access","refresh","error","setState","target","name","value","preventDefault","response","stack","getItem","removeItem","e","render","Login","Signup","handleChange","change","handleSubmit","submit"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAgC,OAAhC;AACA,SAASC,MAAT,EAAiBC,KAAjB,EAAwBC,IAAxB,EAA+BC,aAA/B,QAAmD,kBAAnD;AACA,OAAOC,aAAP,MAA0B,eAA1B;;AAEA,MAAMC,IAAN,SAAmBN,SAAnB,CAA6B;AACzBO,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,QAAQ,EAAE,EADD;AAETC,MAAAA,QAAQ,EAAE,EAFD;AAGTC,MAAAA,KAAK,EAAC,EAHG;AAITC,MAAAA,MAAM,EAAE;AAJC,KAAb;AAMA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBD,IAAxB,CAA6B,IAA7B,CAA1B;AACA,SAAKE,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBF,IAAxB,CAA6B,IAA7B,CAA1B;AACA,SAAKG,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBH,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKI,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBJ,IAAvB,CAA4B,IAA5B,CAAzB;AACH;;AAGDK,EAAAA,iBAAiB,GAAG;AAChB,UAAM;AAACV,MAAAA,QAAD;AAAWC,MAAAA;AAAX,QAAuB,KAAKF,KAAlC;AACAY,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCZ,QAAjC;AACAW,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCX,QAAjC;AACA,UAAMY,oBAAoB,GAAGF,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCZ,QAAjC,CAA7B;AACA,UAAMc,oBAAoB,GAAGH,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCX,QAAjC,CAA7B;AACAc,IAAAA,OAAO,CAACC,GAAR,CAAYH,oBAAZ;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYF,oBAAZ;AACH;;AAED,QAAML,iBAAN,CAAwBQ,KAAxB,EAA+B;AAC3B,QAAI;AACA,YAAMC,IAAI,GAAG,MAAMvB,aAAa,CAACwB,IAAd,CAAmB,gBAAnB,EAAqC;AACpDnB,QAAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWC,QAD+B;AAEpDC,QAAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWE;AAF+B,OAArC,CAAnB;AAIAN,MAAAA,aAAa,CAACyB,QAAd,CAAuBC,OAAvB,CAA+B,eAA/B,IAAkD,SAASH,IAAI,CAACI,MAAhE;AACAX,MAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCM,IAAI,CAACI,MAA1C;AACAX,MAAAA,YAAY,CAACC,OAAb,CAAqB,eAArB,EAAsCM,IAAI,CAACK,OAA3C;AACA,aAAOL,IAAP;AACH,KATD,CASE,OAAOM,KAAP,EAAc;AACZ,YAAMA,KAAN;AACH;AACJ;;AAEDhB,EAAAA,iBAAiB,CAACS,KAAD,EAAQ;AACrB,SAAKQ,QAAL,CAAc;AAAC,OAACR,KAAK,CAACS,MAAN,CAAaC,IAAd,GAAqBV,KAAK,CAACS,MAAN,CAAaE;AAAnC,KAAd;AACH;;AAEDtB,EAAAA,kBAAkB,CAACW,KAAD,EAAQ;AACtB,SAAKQ,QAAL,CAAc;AAAC,OAACR,KAAK,CAACS,MAAN,CAAaC,IAAd,GAAqBV,KAAK,CAACS,MAAN,CAAaE;AAAnC,KAAd;AACH;;AAED,QAAMrB,kBAAN,CAAyBU,KAAzB,EAAgC;AAC5BA,IAAAA,KAAK,CAACY,cAAN;;AACA,QAAI;AACA,YAAMC,QAAQ,GAAG,MAAMnC,aAAa,CAACwB,IAAd,CAAmB,eAAnB,EAAoC;AACvDnB,QAAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWC,QADkC;AAEvDE,QAAAA,KAAK,EAAE,KAAKH,KAAL,CAAWG,KAFqC;AAGvDD,QAAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWE;AAHkC,OAApC,CAAvB;AAKA,aAAO6B,QAAP;AACH,KAPD,CAOE,OAAON,KAAP,EAAc;AACZT,MAAAA,OAAO,CAACC,GAAR,CAAYQ,KAAK,CAACO,KAAlB;AACA,WAAKN,QAAL,CAAc;AACVtB,QAAAA,MAAM,EAACqB,KAAK,CAACM,QAAN,CAAeZ;AADZ,OAAd;AAGH;AACJ;;AAED,QAAMd,YAAN,GAAqB;AACjB,QAAI;AACA,YAAM0B,QAAQ,GAAG,MAAMnC,aAAa,CAACwB,IAAd,CAAmB,aAAnB,EAAkC;AACrD,yBAAiBR,YAAY,CAACqB,OAAb,CAAqB,eAArB;AADoC,OAAlC,CAAvB;AAGArB,MAAAA,YAAY,CAACsB,UAAb,CAAwB,cAAxB;AACAtB,MAAAA,YAAY,CAACsB,UAAb,CAAwB,eAAxB;AACAtC,MAAAA,aAAa,CAACyB,QAAd,CAAuBC,OAAvB,CAA+B,eAA/B,IAAkD,IAAlD;AACA,aAAOS,QAAP;AACH,KARD,CASA,OAAOI,CAAP,EAAU;AACNnB,MAAAA,OAAO,CAACC,GAAR,CAAYkB,CAAZ;AACH;AACJ;;AAEDC,EAAAA,MAAM,GAAG;AACL,wBACI;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,oBAAC,IAAD;AAAM,MAAA,SAAS,EAAE,UAAjB;AAA6B,MAAA,EAAE,EAAE,GAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADA,eAEA,oBAAC,IAAD;AAAM,MAAA,SAAS,EAAE,UAAjB;AAA6B,MAAA,EAAE,EAAE,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAFA,eAGA,oBAAC,IAAD;AAAM,MAAA,SAAS,EAAE,UAAjB;AAA6B,MAAA,EAAE,EAAE,SAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHA,eAIA;AAAQ,MAAA,OAAO,EAAE,KAAK/B,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJA,CADJ,CADJ,eASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAE,QAAnB;AAA6B,MAAA,SAAS,EAAEgC,KAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAE,SAAnB;AAA8B,MAAA,SAAS,EAAEC,MAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,eAGI,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAE,GAAb;AAAkB,MAAA,MAAM,EAAE,mBAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,CADA,CADJ,eAQI,oBAAC,KAAD;AACA,MAAA,QAAQ,EAAE,KAAKtC,KAAL,CAAWC,QADrB;AAEA,MAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWE,QAFrB;AAGA,MAAA,MAAM,EAAE,KAAKQ,iBAHb;AAIA,MAAA,MAAM,EAAE,KAAKD,iBAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARJ,eAcI,oBAAC,MAAD;AACA,MAAA,QAAQ,EAAE,KAAKT,KAAL,CAAWC,QADrB;AAEA,MAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWE,QAFrB;AAGA,MAAA,KAAK,EAAE,KAAKF,KAAL,CAAWG,KAHlB;AAIA,MAAA,MAAM,EAAE,KAAKK,kBAJb;AAKA,MAAA,MAAM,EAAE,KAAKD,kBALb;AAMA,MAAA,MAAM,EAAE,KAAKP,KAAL,CAAWI,MANnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAdJ,CATJ,CADJ;AAmCH;;AAtHwB;;AA0H7B,MAAMkC,MAAN,SAAqB/C,SAArB,CAA+B;AAC3BO,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACH;;AAEDqC,EAAAA,MAAM,GAAG;AACL,UAAM;AAACnC,MAAAA,QAAD;AAAWE,MAAAA,KAAX;AAAkBD,MAAAA,QAAlB;AAA4BE,MAAAA;AAA5B,QAAsC,KAAKL,KAAjD;AACA,UAAMwC,YAAY,GAAG,KAAKxC,KAAL,CAAWyC,MAAhC;AACA,UAAMC,YAAY,GAAG,KAAK1C,KAAL,CAAW2C,MAAhC;AAEA,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAEI;AAAM,MAAA,QAAQ,EAAED,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAEI;AAAO,MAAA,IAAI,EAAC,UAAZ;AAAuB,MAAA,IAAI,EAAC,MAA5B;AAAmC,MAAA,KAAK,EAAExC,QAA1C;AAAoD,MAAA,QAAQ,EAAEsC,YAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAEI;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,IAAI,EAAC,OAAzB;AAAiC,MAAA,KAAK,EAAEpC,KAAxC;AAA+C,MAAA,QAAQ,EAAEoC,YAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAGMnC,MAAM,CAACD,KAAP,GAAeC,MAAM,CAACD,KAAtB,GAA8B,IAHpC,CALJ,eAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAEI;AAAO,MAAA,IAAI,EAAC,UAAZ;AAAuB,MAAA,IAAI,EAAC,UAA5B;AAAuC,MAAA,KAAK,EAAED,QAA9C;AAAwD,MAAA,WAAW,EAAC,sBAApE;AAA2F,MAAA,QAAQ,EAAEqC,YAArG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAGMnC,MAAM,CAACF,QAAP,GAAkBE,MAAM,CAACF,QAAzB,GAAoC,IAH1C,CAVJ,eAeI;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,KAAK,EAAC,QAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAfJ,CAFJ,CADJ;AAsBH;;AAhC0B;;AAmC/B,MAAMmC,KAAN,SAAoB9C,SAApB,CAA8B;AAC1B6C,EAAAA,MAAM,GAAG;AACL,UAAM;AAACnC,MAAAA,QAAD;AAAWC,MAAAA;AAAX,QAAuB,KAAKH,KAAlC;AACA,UAAMwC,YAAY,GAAG,KAAKxC,KAAL,CAAWyC,MAAhC;AACA,UAAMC,YAAY,GAAG,KAAK1C,KAAL,CAAW2C,MAAhC;AACA,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAEI;AAAM,MAAA,QAAQ,EAAED,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAEI;AAAO,MAAA,IAAI,EAAC,UAAZ;AAAuB,MAAA,IAAI,EAAC,MAA5B;AAAmC,MAAA,KAAK,EAAExC,QAA1C;AAAoD,MAAA,QAAQ,EAAEsC,YAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAEI;AAAO,MAAA,IAAI,EAAC,UAAZ;AAAuB,MAAA,IAAI,EAAC,UAA5B;AAAuC,MAAA,KAAK,EAAErC,QAA9C;AAAwD,MAAA,QAAQ,EAAEqC,YAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CALJ,eASI;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,KAAK,EAAC,QAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATJ,CAFJ,CADJ;AAgBH;;AArByB;;AAuB9B,eAAe1C,IAAf","sourcesContent":["import React, { Component} from \"react\";\nimport { Switch, Route, Link , BrowserRouter} from \"react-router-dom\";\nimport axiosInstance from './axiosApi.js'\n\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: \"\",\n            password: \"\",\n            email:\"\",\n            errors: {}\n        };\n        this.handleLogout = this.handleLogout.bind(this);\n        this.SignupHandleChange = this.SignupHandleChange.bind(this);\n        this.SignupHandleSubmit = this.SignupHandleSubmit.bind(this);\n        this.LoginHandleChange = this.LoginHandleChange.bind(this);\n        this.LoginHandleSubmit = this.LoginHandleSubmit.bind(this);\n    }\n\n\n    componentDidMount() {\n        const {username, password} = this.state;\n        localStorage.setItem('username', username);\n        localStorage.setItem('password', password);\n        const localstorageusername = localStorage.setItem('username', username);\n        const localstoragepassword = localStorage.setItem('password', password);\n        console.log(localstorageusername);\n        console.log(localstoragepassword);\n    }\n\n    async LoginHandleSubmit(event) {\n        try {\n            const data = await axiosInstance.post('/token/obtain/', {\n                username: this.state.username,\n                password: this.state.password\n            });\n            axiosInstance.defaults.headers['Authorization'] = \"JWT \" + data.access;\n            localStorage.setItem('access_token', data.access);\n            localStorage.setItem('refresh_token', data.refresh);\n            return data;\n        } catch (error) {\n            throw error;\n        }\n    }\n\n    LoginHandleChange(event) {\n        this.setState({[event.target.name]: event.target.value});\n    }\n\n    SignupHandleChange(event) {\n        this.setState({[event.target.name]: event.target.value});\n    }\n\n    async SignupHandleSubmit(event) {\n        event.preventDefault();\n        try {\n            const response = await axiosInstance.post('/user/create/', {\n                username: this.state.username,\n                email: this.state.email,\n                password: this.state.password\n            });\n            return response;\n        } catch (error) {\n            console.log(error.stack);\n            this.setState({\n                errors:error.response.data\n            });\n        }\n    }\n   \n    async handleLogout() {\n        try {\n            const response = await axiosInstance.post('/blacklist/', {\n                \"refresh_token\": localStorage.getItem(\"refresh_token\")\n            });\n            localStorage.removeItem('access_token');\n            localStorage.removeItem('refresh_token');\n            axiosInstance.defaults.headers['Authorization'] = null;\n            return response;\n        }\n        catch (e) {\n            console.log(e);\n        }\n    };\n\n    render() {\n        return (\n            <div className=\"site\">\n                <nav>\n                    <BrowserRouter>\n                    <Link className={\"nav-link\"} to={\"/\"}>Home</Link>\n                    <Link className={\"nav-link\"} to={\"/login\"}>Login</Link>\n                    <Link className={\"nav-link\"} to={\"/signup\"}>Signup</Link>\n                    <button onClick={this.handleLogout}>Logout</button>\n                    </BrowserRouter>\n                </nav>\n                <main>\n                    <BrowserRouter>\n                    <Switch>\n                        <Route exact path={\"/login\"} component={Login}/>\n                        <Route exact path={\"/signup\"} component={Signup}/>\n                        <Route path={\"/\"} render={() => <div>Home again</div>}/>\n                   </Switch>\n                    </BrowserRouter>\n                    <Login \n                    username={this.state.username} \n                    password={this.state.password} \n                    submit={this.LoginHandleSubmit} \n                    change={this.LoginHandleChange}\n                    />\n                    <Signup \n                    username={this.state.username} \n                    password={this.state.password} \n                    email={this.state.email} \n                    submit={this.SignupHandleSubmit} \n                    change={this.SignupHandleChange}\n                    errors={this.state.errors}\n                    />\n               </main>\n            </div>\n        );\n    }\n}\n\n\nclass Signup extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const {username, email, password, errors} = this.props;\n        const handleChange = this.props.change;\n        const handleSubmit = this.props.submit;\n\n        return (\n            <div>\n                Signup\n                <form onSubmit={handleSubmit}>\n                    <label>\n                        Username:\n                        <input name=\"username\" type=\"text\" value={username} onChange={handleChange}/>\n                    </label>\n                    <label>\n                        Email:\n                        <input name=\"email\" type=\"email\" value={email} onChange={handleChange}/>\n                        { errors.email ? errors.email : null}\n                    </label>\n                    <label>\n                        Password:\n                        <input name=\"password\" type=\"password\" value={password} placeholder=\"8 characters or more\" onChange={handleChange}/>\n                        { errors.password ? errors.password : null}\n                    </label>\n                    <input type=\"submit\" value=\"Submit\"/>\n                </form>\n            </div>\n        )\n    }\n}\n\nclass Login extends Component {\n    render() {\n        const {username, password} = this.props;\n        const handleChange = this.props.change;\n        const handleSubmit = this.props.submit;\n        return (\n            <div>\n                Login\n                <form onSubmit={handleSubmit}>\n                    <label>\n                        Username:\n                        <input name=\"username\" type=\"text\" value={username} onChange={handleChange}/>\n                    </label>\n                    <label>\n                        Password:\n                        <input name=\"password\" type=\"password\" value={password} onChange={handleChange}/>\n                    </label>\n                    <input type=\"submit\" value=\"Submit\"/>\n                </form>\n            </div>\n        )\n    }\n}\nexport default Home;"]},"metadata":{},"sourceType":"module"}