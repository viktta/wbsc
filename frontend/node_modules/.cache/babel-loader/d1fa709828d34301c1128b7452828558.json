{"ast":null,"code":"var _jsxFileName = \"/home/viktta/Code/wbsc/frontend/src/Components/Home.js\";\nimport React, { Component } from \"react\";\nimport { Switch, Route, Link, BrowserRouter } from \"react-router-dom\";\nimport Login from \"./Login\";\nimport Signup from \"./Signup\";\nimport axiosInstance from './axiosApi';\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      email: \"\",\n      errors: {}\n    };\n    this.handleLogout = this.handleLogout.bind(this);\n    this.signUpHandleChange = this.signUpHandleChange.bind(this);\n    this.signUpHandleSubmit = this.signUpHandleSubmit.bind(this);\n    this.loginHandleSubmit = this.loginHandleSubmit.bind(this);\n    this.loginHandleChange = this.loginHandleChange.bind(this);\n  }\n\n  async handleLogout() {\n    try {\n      const response = await axiosInstance.post('/blacklist/', {\n        \"refresh_token\": localStorage.getItem(\"refresh_token\")\n      });\n      localStorage.removeItem('access_token');\n      localStorage.removeItem('refresh_token');\n      axiosInstance.defaults.headers['Authorization'] = null;\n      return response;\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async signUpHandleSubmit(event) {\n    event.preventDefault();\n\n    try {\n      const response = await axiosInstance.post('/user/create/', {\n        username: this.state.username,\n        email: this.state.email,\n        password: this.state.password\n      });\n      return response;\n    } catch (error) {\n      console.log(error.stack);\n      this.setState({\n        errors: error.response.data\n      });\n    }\n  }\n\n  signUpHandleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  loginHandleSubmit(event) {\n    event.preventDefault();\n    axiosInstance.post('/token/obtain/', {\n      username: this.state.username,\n      password: this.state.password\n    }).then(result => {\n      axiosInstance.defaults.headers['Authorization'] = \"JWT \" + result.data.access;\n      localStorage.setItem('access_token', result.data.access);\n      localStorage.setItem('refresh_token', result.data.refresh);\n    }).catch(error => {\n      throw error;\n    });\n  }\n\n  loginHandleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n  /*async asyncLoginHandleSubmit(event) {\n      event.preventDefault();\n      try {\n          const data = await axiosInstance.post('/token/obtain/', {\n              username: this.state.username,\n              password: this.state.password\n          });\n          axiosInstance.defaults.headers['Authorization'] = \"JWT \" + data.access;\n          localStorage.setItem('access_token', data.access);\n          localStorage.setItem('refresh_token', data.refresh);\n          return data;\n      } catch (error) {\n          throw error;\n      }\n  }*/\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"site\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(BrowserRouter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"nav-link\",\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, \"Home\"), /*#__PURE__*/React.createElement(Link, {\n      className: \"nav-link\",\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(Link, {\n      className: \"nav-link\",\n      to: \"/signup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }\n    }, \"Signup\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }\n    }, \"Logout\"))), /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(BrowserRouter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      component: Login,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/signup\",\n      component: Signup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/\",\n      render: () => /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 57\n        }\n      }, \"Home again\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 25\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-main-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(Login, {\n      loginSubmit: this.loginHandleSubmit,\n      loginChange: this.loginHandleChange,\n      loginUsername: this.state.username,\n      loginPassword: this.state.password,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Signup, {\n      SignupSubmit: this.signUpHandleSubmit,\n      SignupChange: this.signUpHandleChange,\n      SignupUsername: this.state.username,\n      SignupPassword: this.state.password,\n      SignupErrors: this.state.errors,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/viktta/Code/wbsc/frontend/src/Components/Home.js"],"names":["React","Component","Switch","Route","Link","BrowserRouter","Login","Signup","axiosInstance","Home","constructor","props","state","username","password","email","errors","handleLogout","bind","signUpHandleChange","signUpHandleSubmit","loginHandleSubmit","loginHandleChange","response","post","localStorage","getItem","removeItem","defaults","headers","e","console","log","event","preventDefault","error","stack","setState","data","target","name","value","then","result","access","setItem","refresh","catch","render"],"mappings":"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","sourcesContent":["import React, { Component} from \"react\";\nimport { Switch, Route, Link , BrowserRouter} from \"react-router-dom\";\nimport Login from \"./Login\";\nimport Signup from \"./Signup\";\nimport axiosInstance from './axiosApi';\n\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: \"\",\n            password: \"\",\n            email:\"\",\n            errors: {},\n        }\n        this.handleLogout = this.handleLogout.bind(this);\n        this.signUpHandleChange = this.signUpHandleChange.bind(this);\n        this.signUpHandleSubmit = this.signUpHandleSubmit.bind(this);\n        this.loginHandleSubmit = this.loginHandleSubmit.bind(this);\n        this.loginHandleChange = this.loginHandleChange.bind(this);\n    }\n\n    async handleLogout() {\n        try {\n            const response = await axiosInstance.post('/blacklist/', {\n                \"refresh_token\": localStorage.getItem(\"refresh_token\")\n            });\n            localStorage.removeItem('access_token');\n            localStorage.removeItem('refresh_token');\n            axiosInstance.defaults.headers['Authorization'] = null;\n            return response;\n        }\n        catch (e) {\n            console.log(e);\n        }\n    };\n\n    async signUpHandleSubmit(event) {\n        event.preventDefault();\n        try {\n            const response = await axiosInstance.post('/user/create/', {\n                username: this.state.username,\n                email: this.state.email,\n                password: this.state.password\n            });\n            return response;\n        } catch (error) {\n            console.log(error.stack);\n            this.setState({\n                errors:error.response.data\n            });\n        }\n    }\n\n\n    signUpHandleChange(event) {\n        this.setState({[event.target.name]: event.target.value});\n    }\n\n    loginHandleSubmit(event){\n        event.preventDefault();\n        axiosInstance.post('/token/obtain/', {\n                username: this.state.username,\n                password: this.state.password\n            }).then(\n                result => {\n                    axiosInstance.defaults.headers['Authorization'] = \"JWT \" + result.data.access;\n                    localStorage.setItem('access_token', result.data.access);\n                    localStorage.setItem('refresh_token', result.data.refresh);\n                }\n            ).catch (error => {\n                throw error;\n            })\n    }\n\n    \n    loginHandleChange(event) {\n        this.setState({[event.target.name]: event.target.value});\n    }\n\n    /*async asyncLoginHandleSubmit(event) {\n        event.preventDefault();\n        try {\n            const data = await axiosInstance.post('/token/obtain/', {\n                username: this.state.username,\n                password: this.state.password\n            });\n            axiosInstance.defaults.headers['Authorization'] = \"JWT \" + data.access;\n            localStorage.setItem('access_token', data.access);\n            localStorage.setItem('refresh_token', data.refresh);\n            return data;\n        } catch (error) {\n            throw error;\n        }\n    }*/\n\n\n    render() {\n        return (\n            <div className=\"site\">\n                <nav>\n                    <BrowserRouter>\n                    <Link className={\"nav-link\"} to={\"/\"}>Home</Link>\n                    <Link className={\"nav-link\"} to={\"/login\"}>Login</Link>\n                    <Link className={\"nav-link\"} to={\"/signup\"}>Signup</Link>\n                    <button onClick={this.handleLogout}>Logout</button>\n                    </BrowserRouter>\n                </nav>\n                <main>\n                    <BrowserRouter>\n                    <Switch>\n                        <Route exact path={\"/login\"} component={Login}/>\n                        <Route exact path={\"/signup\"} component={Signup}/>\n                        <Route path={\"/\"} render={() => <div>Home again</div>}/>\n                   </Switch>\n                    </BrowserRouter>\n               </main>\n               <div className=\"user-main-div\">\n                    <Login loginSubmit={this.loginHandleSubmit} \n                    loginChange={this.loginHandleChange} \n                    loginUsername={this.state.username} \n                    loginPassword={this.state.password}\n                    />\n                    <Signup \n                    SignupSubmit={this.signUpHandleSubmit} \n                    SignupChange={this.signUpHandleChange}\n                    SignupUsername={this.state.username}\n                    SignupPassword={this.state.password}\n                    SignupErrors={this.state.errors}\n                    />\n               </div>\n            </div>\n        );\n    }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}